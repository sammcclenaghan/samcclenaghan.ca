---
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import ThemeManager from "@components/ThemeManager.astro";
import { ClientRouter } from "astro:transitions";
import "@styles/global.css";
---

<!doctype html>
<html lang="en" class="scroll-smooth">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <ThemeManager defaultTheme="auto" />
        <script>
          import { navigate } from 'astro:transitions/client';
          
          if (typeof window !== 'undefined') {
            let bound = false;
            
            function isEditable(target) {
              return target instanceof Element && (
                target.tagName === 'INPUT' ||
                target.tagName === 'TEXTAREA' ||
                target.getAttribute('contenteditable') === '' ||
                target.getAttribute('contenteditable') === 'true'
              );
            }
            
            function onKeydown(e) {
              if (e.defaultPrevented || e.metaKey || e.ctrlKey || e.altKey || e.shiftKey || e.isComposing || e.repeat) return;
              if (isEditable(e.target)) return;
              
              const k = (e.key || '').toLowerCase();
              if (k === 'h') navigate('/');
              else if (k === 'b') navigate('/misc');
              else if (k === 'p') navigate('/projects');
            }
            
            if (!bound) {
              window.addEventListener('keydown', onKeydown);
              bound = true;
            }
          }
        </script>
        <ClientRouter />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>Sam McClenaghan</title>
    </head>
    <body>
        <Header />
        <main class="pt-2">
            <slot />
        </main>
        <Footer />
    </body>

</html>
