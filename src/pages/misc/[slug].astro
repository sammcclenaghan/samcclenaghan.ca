---
import { getCollection, render } from "astro:content";
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import Link from "@components/Link.astro";

export async function getStaticPaths() {
    const misc = await getCollection("misc");
    return misc
        .filter((item) => !item.data.draft)
        .map((item) => ({
            params: { slug: item.slug },
            props: { entry: item },
        }));
}

const { entry } = Astro.props;

const { Content, headings } = await render(entry);

const { title, description, date } = entry.data;
const pageTitle = `${title} • Misc`;
---

<Layout>
    <head>
        <title>{pageTitle}</title>
        {description && <meta name="description" content={description} />}
        <meta property="og:title" content={pageTitle} />
        {
            description && (
                <meta property="og:description" content={description} />
            )
        }
    </head>
    <Container>
        <div class="space-y-6">
            <nav class="animate text-sm">
                <Link href="/misc" aria-label="Back to all misc items"
                    >← All misc</Link
                >
            </nav>
            <div class="animate font-semibold text-black dark:text-white">
                {title}
            </div>
            {date && <div class="animate text-sm opacity-75">{date}</div>}
            <article class="animate prose dark:prose-invert">
                <Content />
            </article>
        </div>
    </Container>
</Layout>
